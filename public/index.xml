<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Derik Evangelista</title>
    <link>http://onion.works/index.xml</link>
    <description>Recent content on Derik Evangelista</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    <lastBuildDate>Mon, 27 Feb 2017 13:38:47 +0000</lastBuildDate>
    <atom:link href="http://onion.works/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>jq cookbook</title>
      <link>http://onion.works/blog/jq-cookbook/</link>
      <pubDate>Mon, 27 Feb 2017 13:38:47 +0000</pubDate>
      
      <guid>http://onion.works/blog/jq-cookbook/</guid>
      <description>

&lt;p&gt;If you ever had to handle JSON in Bash, you probably used &lt;a href=&#34;https://stedolan.github.io/jq/&#34;&gt;jq&lt;/a&gt;, the lightweight and portable cli to process JSON data. Like &lt;a href=&#34;https://en.wikipedia.org/wiki/AWK&#34;&gt;awk&lt;/a&gt; and &lt;a href=&#34;https://en.wikipedia.org/wiki/Sed&#34;&gt;sed&lt;/a&gt;, jq has it&amp;rsquo;s own &lt;a href=&#34;https://stedolan.github.io/jq/manual&#34;&gt;syntax&lt;/a&gt; and it can be quite intimidating the first time you see it.&lt;/p&gt;

&lt;p&gt;Rather than trying to be a complete cookbook (or a manual, or a tutorial), in this post I&amp;rsquo;ll share some useful snippets that I used in the past, and will keep updating it as I encounter new uses to the tool.&lt;/p&gt;

&lt;!-- recipes --&gt;

&lt;h2 id=&#34;merging&#34;&gt;Merging&lt;/h2&gt;

&lt;h3 id=&#34;sum&#34;&gt;Sum&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$&amp;gt; json1=&#39;{&amp;quot;foo&amp;quot;: &amp;quot;bar&amp;quot;, &amp;quot;otherfoo&amp;quot;: 1}&#39;
$&amp;gt; json2=&#39;{&amp;quot;bar&amp;quot;: &amp;quot;foo&amp;quot;, &amp;quot;otherfoo&amp;quot;: 2}&#39;
$&amp;gt; echo &amp;quot;$json1&amp;quot; &amp;quot;$json2&amp;quot; | jq -s add #or &#39;.[0] + .[1]
{
  &amp;quot;foo&amp;quot;: &amp;quot;bar&amp;quot;,
  &amp;quot;bar&amp;quot;: &amp;quot;foo&amp;quot;,
  &amp;quot;otherfoo&amp;quot;: 2  # value on the right operand wins
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;recursive-merge&#34;&gt;Recursive merge&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$&amp;gt; json1=&#39;{&amp;quot;key&amp;quot;: {&amp;quot;foo&amp;quot;: &amp;quot;bar&amp;quot;, &amp;quot;bar&amp;quot;: &amp;quot;foo&amp;quot;}}&#39;
$&amp;gt; json2=&#39;{&amp;quot;key&amp;quot;: {&amp;quot;foo&amp;quot;: &amp;quot;otherbar&amp;quot;, &amp;quot;otherbar&amp;quot;: &amp;quot;otherfoo&amp;quot;}}&#39;
$&amp;gt; echo &amp;quot;$json1&amp;quot; &amp;quot;$json2&amp;quot; | jq -s &#39;.[0] * .[1]&#39;
{
  &amp;quot;key&amp;quot;: {
    &amp;quot;foo&amp;quot;: &amp;quot;otherbar&amp;quot;, # value on the right operand wins
    &amp;quot;bar&amp;quot;: &amp;quot;foo&amp;quot;,
    &amp;quot;otherbar&amp;quot;: &amp;quot;otherfoo&amp;quot;
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;arrays&#34;&gt;Arrays&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$&amp;gt; json1=&#39;{&amp;quot;foo&amp;quot;: [&amp;quot;foo&amp;quot;, &amp;quot;bar&amp;quot;]}&#39;
$&amp;gt; json2=&#39;{&amp;quot;foo&amp;quot;: [&amp;quot;otherfoo&amp;quot;]}&#39;
$&amp;gt; echo &amp;quot;$json1&amp;quot; &amp;quot;$json2&amp;quot; | jq -s &#39;
    def flatten: 
        reduce .[] as $i([]; 
            if $i | type == &amp;quot;array&amp;quot; then 
                . + ($i | flatten) 
            else  
                . + [$i] 
            end 
        );  
    [.[] | to_entries] | flatten | reduce .[] as $dot
    ({}; .[$dot.key] += $dot.value)&#39;
{
  &amp;quot;foo&amp;quot;: [
    &amp;quot;foo&amp;quot;,
    &amp;quot;bar&amp;quot;,
    &amp;quot;otherfoo&amp;quot;
  ]
}
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>about</title>
      <link>http://onion.works/about/</link>
      <pubDate>Mon, 27 Feb 2017 12:54:59 +0000</pubDate>
      
      <guid>http://onion.works/about/</guid>
      <description>&lt;div class=&#34;grid about&#34;&gt;
  &lt;div class=&#34;grid-cell&#34;&gt;
    &lt;img alt=&#34;Picture of my wife and I&#34; src=&#34;http://onion.works/img/small_pic2.jpg&#34; /&gt;
  &lt;/div&gt;
  &lt;div class=&#34;grid-cell&#34;&gt;
    &lt;p&gt; My name is Derik Evangelista. &lt;/p&gt; 
    &lt;p&gt; I live in London, UK. &lt;/p&gt; 
    &lt;p&gt; I&#39;m a software engineer at &lt;a href=&#34;http://pivotal.io&#34;&gt;Pivotal&lt;/a&gt;&lt;/p&gt; 
    &lt;p&gt; I&#39;ve studied Computer Science at &lt;a href=&#34;http://www.ufpr.br/portalufpr/&#34;&gt;UFPR&lt;/a&gt;&lt;/p&gt; 
    &lt;p&gt; I&#39;ve studied Artifical Intelligence applied to Education at &lt;a href=&#34;http://www.ufpr.br/portalufpr/&#34;&gt;UFPR.&lt;/a&gt;&lt;/p&gt; 
    &lt;p&gt; I&#39;ve worked with Back-end and Front-end. &lt;/p&gt; 
    &lt;p&gt; Catch me on twitter: &lt;a href=&#34;https://twitter.com/kirederik&#34;&gt;@kirederik&lt;/a&gt; &lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Reading List</title>
      <link>http://onion.works/reading-list/</link>
      <pubDate>Thu, 23 Feb 2017 20:42:21 -0700</pubDate>
      
      <guid>http://onion.works/reading-list/</guid>
      <description>

&lt;h3 id=&#34;currently-reading&#34;&gt;Currently Reading&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;a rel=&#34;nofollow&#34; href=&#34;http://amzn.to/2mxyIEL&#34;&gt;The Lord of the Rings: The Fellowship of the Ring&lt;/a&gt;&lt;img src=&#34;http://ir-uk.amazon-adsystem.com/e/ir?t=onionworks-21&amp;l=as2&amp;o=2&amp;a=B002RI9THI&#34; width=&#34;1&#34; height=&#34;1&#34; border=&#34;0&#34; alt=&#34;&#34; style=&#34;border:none !important; margin:0px !important;&#34; /&gt;, By J. R. R. Tolkien&lt;/p&gt;

&lt;p&gt;&lt;a rel=&#34;nofollow&#34; href=&#34;http://amzn.to/2mxCpdR&#34;&gt;An Edible History of Humanity)&lt;/a&gt;, by Tom Standage&lt;/p&gt;

&lt;p&gt;&lt;a rel=&#34;nofollow&#34; href=&#34;http://amzn.to/2m0rSVd&#34;&gt;Lean Branding&lt;/a&gt;, by Laura Busche&lt;/p&gt;

&lt;p&gt;&lt;a rel=&#34;nofollow&#34; href=&#34;http://amzn.to/2mxxo4U&#34;&gt;Helter Skelter: Fashion Unfriendly&lt;/a&gt;, by Kyoko Okazaki&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://shop.oreilly.com/product/0636920042501.do&#34;&gt;Cloud Foundry: The Definitive Guide&lt;/a&gt;, by Duncan C. E. Winn&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;2017&#34;&gt;2017&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;Avengers (2016) &lt;a href=&#34;http://marvel.com/comics/issue/61373/avengers_2016_1&#34;&gt;#1&lt;/a&gt;,
&lt;a href=&#34;http://marvel.com/comics/issue/61374/avengers_2016_2&#34;&gt;#2&lt;/a&gt;,
&lt;a href=&#34;http://marvel.com/comics/issue/61375/avengers_2016_3&#34;&gt;#3&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Avengers (2016) &lt;a href=&#34;http://marvel.com/comics/issue/59596/avengers_2016_1.1&#34;&gt;#1.1&lt;/a&gt;,
&lt;a href=&#34;http://marvel.com/comics/issue/59596/avengers_2016_2.1&#34;&gt;#2.1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Detective Comics &lt;a href=&#34;http://www.dccomics.com/comics/detective-comics-2016/detective-comics-950&#34;&gt;#950&lt;/a&gt;,
&lt;a href=&#34;http://www.dccomics.com/comics/detective-comics-2016/detective-comics-951&#34;&gt;#951&lt;/a&gt;,
&lt;a href=&#34;http://www.dccomics.com/comics/detective-comics-2016/detective-comics-952&#34;&gt;#952&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;!-- amazon impressions --&gt;

&lt;p&gt;&lt;img src=&#34;http://ir-uk.amazon-adsystem.com/e/ir?t=onionworks0d-21&amp;l=as2&amp;o=2&amp;a=B002RI9THI&#34; width=&#34;1&#34; height=&#34;1&#34; border=&#34;0&#34; alt=&#34;&#34; style=&#34;border:none !important; margin:0px !important;&#34; /&gt;
&lt;img src=&#34;http://ir-uk.amazon-adsystem.com/e/ir?t=onionworks0d-21&amp;l=as2&amp;o=2&amp;a=1843546353&#34; width=&#34;1&#34; height=&#34;1&#34; border=&#34;0&#34; alt=&#34;&#34; style=&#34;border:none !important; margin:0px !important;&#34; /&gt;
&lt;img src=&#34;http://ir-uk.amazon-adsystem.com/e/ir?t=onionworks0d-21&amp;l=as2&amp;o=2&amp;a=144937302X&#34; width=&#34;1&#34; height=&#34;1&#34; border=&#34;0&#34; alt=&#34;&#34; style=&#34;border:none !important; margin:0px !important;&#34; /&gt;
&lt;img src=&#34;http://ir-uk.amazon-adsystem.com/e/ir?t=onionworks0d-21&amp;l=as2&amp;o=2&amp;a=1935654837&#34; width=&#34;1&#34; height=&#34;1&#34; border=&#34;0&#34; alt=&#34;&#34; style=&#34;border:none !important; margin:0px !important;&#34; /&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Code</title>
      <link>http://onion.works/code/</link>
      <pubDate>Wed, 19 Aug 2015 20:29:37 -0700</pubDate>
      
      <guid>http://onion.works/code/</guid>
      <description>

&lt;p&gt;The Hitchhiker&amp;rsquo;s Guide to the Galaxy is a comedy science fiction series created by &lt;a href=&#34;https://en.wikipedia.org/wiki/Douglas_Adams&#34;&gt;Douglas Adams&lt;/a&gt;. Originally a radio comedy broadcast on BBC Radio 4 in 1978, it was later adapted to other formats, and over several years it gradually became an international multi-media phenomenon. Adaptations have included stage shows, a &amp;ldquo;trilogy&amp;rdquo; of five books published between 1979 and 1992, a sixth novel penned by &lt;a href=&#34;https://en.wikipedia.org/wiki/Eoin_Colfer&#34;&gt;Eoin Colfer&lt;/a&gt; in 2009, a 1981 TV series, a 1984 computer game, and three series of three-part comic book adaptations of the first three novels published by DC Comics between 1993 and 1996. There were also two series of towels, produced by Beer-Davies, that are considered by some fans to be an &amp;ldquo;official version&amp;rdquo; of The Hitchhiker&amp;rsquo;s Guide to the Galaxy, as they include text from the first novel.&lt;/p&gt;

&lt;h3 id=&#34;movie&#34;&gt;Movie&lt;/h3&gt;

&lt;p&gt;A Hollywood-funded film version, produced and filmed in the UK, was released in April 2005, and radio adaptations of the third, fourth, and fifth novels were broadcast from 2004 to 2005. Adams did many of these adaptations, including the novels, the TV series, the computer game, and the earliest drafts of the Hollywood filmâ€™s screenplay, and some of the stage shows introduced new material written by Adams.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>